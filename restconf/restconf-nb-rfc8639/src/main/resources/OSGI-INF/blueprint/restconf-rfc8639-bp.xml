<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2020 PANTHEON.tech s.r.o. All rights reserved.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License v1.0 which accompanies this distribution,
  ~ and is available at http://www.eclipse.org/legal/epl-v10.html
  -->
<blueprint
  xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
  xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.4.0">
    <bean id="rfc8639RestconfApp" class="org.opendaylight.restconf.nb.rfc8639.RFC8639RestconfApp" init-method="init">
        <argument ref="txChainHandlerService"/>
        <argument ref="schemaCtxHandlerService"/>
        <argument ref="dOMNotificationService"/>
        <argument ref="dOMSchemaService"/>
        <argument ref="dOMMountPointService"/>
        <argument ref="dOMRpcProviderService"/>
        <argument ref="rpcServiceHandlerService"/>
    </bean>

    <reference id="txChainHandlerService" ext:proxy-method='classes'
      interface="org.opendaylight.restconf.nb.rfc8040.handlers.TransactionChainHandler"/>
    <reference id="schemaCtxHandlerService" ext:proxy-method='classes'
      interface="org.opendaylight.restconf.nb.rfc8040.handlers.SchemaContextHandler"/>
    <reference id="rpcServiceHandlerService" ext:proxy-method='classes'
      interface="org.opendaylight.restconf.nb.rfc8040.handlers.RpcServiceHandler"/>

    <bean id="rfc8639webInitializer" class="org.opendaylight.restconf.nb.rfc8639.RFC8639WebInitializer" 
      destroy-method="close">
        <argument ref="webServer"/>
        <argument ref="webContextSecurer"/>
        <argument ref="servletSupport"/>
        <argument ref="rfc8639RestconfApp"/>
    </bean>

    <reference id="dOMMountPointService" interface="org.opendaylight.mdsal.dom.api.DOMMountPointService"/>
    <reference id="dOMNotificationService" interface="org.opendaylight.mdsal.dom.api.DOMNotificationService"/>
    <reference id="dOMRpcProviderService" interface="org.opendaylight.mdsal.dom.api.DOMRpcProviderService"/>
    <reference id="dOMSchemaService" interface="org.opendaylight.mdsal.dom.api.DOMSchemaService"/>

    <reference id="webServer" interface="org.opendaylight.aaa.web.WebServer"/>
    <reference id="webContextSecurer" interface="org.opendaylight.aaa.web.WebContextSecurer"/>
    <reference id="servletSupport" interface="org.opendaylight.aaa.web.servlet.ServletSupport"/>
</blueprint>
